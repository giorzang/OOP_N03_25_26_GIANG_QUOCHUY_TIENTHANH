<%- include('../includes/head.ejs') %>
<%- include('../includes/navigation.ejs') %>

<main>
    <div class="container" style="max-width: 700px; margin-top: 100px;">
        <div class="card shadow-sm p-4">
            
            <h2 class="text-center mb-4">
                <% if (editing) { %>
                    Chỉnh sửa Sản phẩm
                <% } else { %>
                    Thêm Sản phẩm mới
                <% } %>
            </h2>

            <form action="<% if (editing) { %>/admin/edit-product<% } else { %>/admin/add-product<% } %>" method="POST">
                
                <div class="mb-3">
                    <label for="name" class="form-label">Tên sản phẩm</label>
                    <input type="text" class="form-control" id="name" name="name" 
                           value="<% if (editing) { %><%= product.name %><% } %>" required>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="price" class="form-label">Giá (VND)</label>
                        <input type="number" class="form-control" id="price" name="price" 
                               value="<% if (editing) { %><%= product.price %><% } %>" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="category_id" class="form-label">Phân loại</label>
                        <select class="form-select" id="category_id" name="category_id" required>
                            <option value="">-- Chọn phân loại --</option>
                            <% for (let category of categories) { %>
                                <option value="<%= category.id %>"
                                    <% if (editing && product.category_id == category.id) { %>
                                        selected
                                    <% } %>
                                >
                                    <%= category.name %>
                                </option>
                            <% } %>
                        </select>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="image_url" class="form-label">URL Hình ảnh</label>
                    <input type="text" class="form-control" id="image_url" name="image_url" 
                           value="<% if (editing) { %><%= product.imageUrl %><% } %>">
                </div>

                <div class="mb-3">
                    <label for="description" class="form-label">Mô tả</label>
                    <textarea class="form-control" id="description" name="description" rows="4"><% if (editing) { %><%= product.description %><% } %></textarea>
                </div>

                <% if (editing) { %>
                    <input type="hidden" name="productId" value="<%= product.id %>">
                <% } %>

                <div class="d-grid">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <% if (editing) { %>
                            Cập nhật
                        <% } else { %>
                            Lưu sản phẩm
                        <% } %>
                    </button>
                </div>

            </form>
        </div>
    </div>
</main>

<div style="height: 100px;"></div>

<%- include('../includes/end.ejs') %>